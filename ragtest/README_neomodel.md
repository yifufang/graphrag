# neomodel查询Neo4j实体工具

这个工具使用neomodel库连接到Neo4j数据库，查询type为空字符串的实体数量。

## 文件说明

- `install_neomodel.py` - 安装neomodel和相关依赖
- `neomodel_query.py` - 主查询脚本
- `README_neomodel.md` - 使用说明

## 使用步骤

### 1. 安装依赖

```bash
python install_neomodel.py
```

### 2. 确保Neo4j运行

确保你的Neo4j数据库正在运行，并且已经导入了GraphRAG的实体数据。

- 地址: `neo4j://localhost:7687`
- 用户名: `neo4j`
- 密码: `password`

### 3. 运行查询

```bash
python neomodel_query.py
```

## 功能特性

- 📊 **数据库统计**: 显示总实体数、有type的实体数、空type实体数
- 🔍 **详细查询**: 显示type为空字符串的实体详情（前10个）
- 📈 **类型分布**: 显示实体类型分布排行榜
- 💡 **智能建议**: 根据查询结果提供数据质量建议

## 查询结果说明

脚本会查询并显示：

1. **type = ''** (空字符串)的实体数量 ⭐
2. **type IS NULL** (NULL值)的实体数量  
3. 总实体数量和比例统计
4. 实体类型分布情况

## 预期输出示例

```
🏥 中医知识图谱 - neomodel查询工具
============================================================
🔌 连接到Neo4j数据库...
✅ 数据库连接成功!

📊 获取数据库统计信息...
📈 数据库统计:
   总实体数量: 1,234
   有type的实体: 1,200
   type为空字符串('')的实体: 34
   type为NULL的实体: 0

📊 查询实体类型分布...
🏷️  实体类型分布 (Top 20):
--------------------------------------------------
 1. 药材: 456
 2. 疾病: 234
 3. 症状: 189
 4. '' (空字符串) ⭐: 34
 ...

🔍 查询type为空字符串的实体 (显示前10个)...
📋 找到的实体:
--------------------------------------------------------------------------------
 1. ID: entity_123
    名称: 某个实体名称
    类型: '' (空字符串)
    描述: 这是一个描述...

============================================================
📋 查询结果总结:
============================================================
🎯 type为空字符串('')的实体数量: 34
📊 占总实体的比例: 2.76%

💡 建议:
   - 检查数据源中的实体类型字段
   - 考虑为这些实体分配合适的类型
   - 或者清理这些无类型的实体
```

## 技术细节

- 使用 **neomodel** 作为Neo4j的Python ORM
- 直接使用Cypher查询获得最佳性能
- 支持中文显示和UTF-8编码
- 包含错误处理和连接测试

## 故障排除

如果遇到连接问题：

1. 确保Neo4j服务正在运行
2. 检查用户名密码是否正确
3. 确认端口7687可访问
4. 验证数据库中确实有Entity节点