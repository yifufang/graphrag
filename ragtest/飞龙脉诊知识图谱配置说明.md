# 飞龙脉诊知识图谱配置修改说明

## 概述

本次修改将GraphRAG系统从通用中医知识图谱调整为专门的飞龙脉诊知识图谱，主要涉及实体类型定义、关系类型调整、以及相关prompt文件的更新。

## 主要修改内容

### 1. 实体类型调整 (settings.yaml)

**原实体类型：**
- 药材, 方剂, 疾病, 症状, 医家, 功效, 病因, 脉象, 诊断方法, 经络, 穴位, 脏腑

**新实体类型：**
- 脉象, 脉位, 病症, 治疗方法, 医家, 著作, 临床案例, 脉诊系统

### 2. 飞龙脉诊核心实体定义

#### 脉象 (Pulse Quality/Phenomenon)
- **定义**：脉诊中感知到的脉搏的不同特征、形态、质感和位置
- **主要属性**：名称、描述/质感、出现位置、脉率、脉力、浮沉、兼脉、特殊形态
- **典型脉象**：细脉、沉脉、数脉、迟脉、紧脉、弦脉、滑脉、涩脉、腹脉、棉花脉、血浊脉、血热脉、血浓脉、微脉、软弱消失脉、有力冲击脉、长脉、短脉、局限脉、引顿脉、死脉、空脉、无阻力空陷脉、隔硬脉、隔空脉、隔空心脉、散脉、浮脉、缓脉、刺紧脉、小紧脉、洪实脉、烁脉、绳索脉、粗振动脉、细振动脉、气球脉、悬脉、物质缺乏脉、弥散脉、华脉、浮华脉、扁平脉、崩解脉、动斗脉、面团脉、不定型脉、电机脉、反关脉、三阴脉、分裂脉、跳跃脉、刺紧绳索脉、无阻力空心绳索脉、无阻力绳索空心全形异脉、气层软弱消失脉、异脉等

#### 脉位 (Pulse Position)
- **定义**：手腕部桡动脉上用于诊脉的具体位置，对应不同的脏腑、系统或身体区域
- **主要属性**：名称、对应脏腑/系统、取法、特殊性、临床意义
- **典型脉位**：左寸、右寸、左关、右关、左右尺、肺特脉、胆囊脉位、胃幽门延伸脉位、食道脉位、远心肝郁组脉位、尺侧肝郁组脉位、膀胱脉位、大小肠脉位、骨盆下腔脉位、横膈脉位、肌肉骨骼脉位、神经心理脉位、三角脉位、二间半脉位、大血管脉位、横格脉位、脾的辅助脉位、十二指肠脉位等

#### 病症 (TCM Syndrome/Condition)
- **定义**：中医理论中对疾病某一阶段病理本质的概括
- **主要属性**：名称、相关脉象、临床表现、病因/机制、病理产物、情志因素
- **典型病症**：血虚、气阴两虚、气血两虚、肺气阻滞、精不化血、神经紧张、气虚、心血虚、肝血不足、脾胃虚弱、肾精不足、肝气郁结、肝阳化火、血中有毒、血中实热、血液浓稠、精血互化障碍、外感风寒、外感风邪、外感风热、太阳中风、太阳伤寒、胆囊湿热、肝风内动、中风先兆、出血性脑卒中、抑郁症、癌症体质、疤痕体质、不孕、食道器质性病变、食道癌风险、胆石症、慢性盆腔炎、自身免疫性疾病等

#### 治疗方法 (Treatment Method/Principle)
- **定义**：根据脉象和病症诊断所采取的治疗手段或指导原则
- **主要属性**：名称、方药、针灸穴位、治法、具体应用、针对病症、效果
- **典型方法**：大补五脏原气、养血、解表、解毒、补气、温阳、疏肝解郁、活血化瘀、软坚散结、清利湿热、温胆、调和肝脾、调和气血、扶正祛邪、调和阴阳、改善阳虚、调整情绪状态、补气养血、温胆汤加减、疏肝理气、清热利湿、活血化瘀、解毒、扶正固本、平肝熄风、清热解毒、滋阴降火、健脾益气等

#### 医家 (Physician/Lineage Holder)
- **定义**：飞龙脉诊流派的传承者、发展者或关键人物
- **主要属性**：姓名、地位/角色、贡献
- **典型医家**：沈汉峰、海门（Dr. Heimer）、丁甘仁、丁济万、张文淮、杰米（Jamie）、吉米（Jimmy）、林盛明、徐渊、上哈轮、菲隆、沈鹤峰、真友老师、孟和等

#### 著作 (Work/Literature)
- **定义**：与飞龙脉诊相关的书籍、文献或参考资料
- **主要属性**：名称、作者/编者、内容/作用
- **典型著作**：《当代中医脉诊精华》、《濒湖脉诀》、《内经·脉要精微论》、八百页的飞龙书、《飞龙书》、《菲隆书》、《伤寒论》等

#### 临床案例 (Clinical Case)
- **定义**：用于教学或说明脉诊应用的具体病人情况或医者反思
- **主要属性**：简要描述、案例类型、相关脉象、诊断、治疗、结果

#### 脉诊系统 (Pulse Diagnosis System/Theory)
- **定义**：特定的脉诊理论流派或框架
- **主要属性**：名称、创立者/传承人、核心特点、相关机构
- **典型系统**：飞龙脉法、孟和一派、沈海门飞龙脉法、沈海门脉法、菲隆脉诊、上哈论、《伤寒论》脉法等

### 3. 关系类型调整

**原关系类型：**
- 治疗, 组成, 功效, 症状表现, 归经, 病因, 脉象, 诊断, 配伍, 师承

**新关系类型：**
- 脉象表现, 脉位对应, 病症诊断, 治疗方法, 传承关系, 文献记载, 临床案例, 理论体系, 脉象特征, 脉位取法, 病症机制, 治疗效果

### 4. 修改的文件列表

#### 核心配置文件
- `ragtest/settings.yaml` - 更新实体类型和声明描述
- `ragtest/prompts/extract_graph.txt` - 更新飞龙脉诊术语处理和示例
- `ragtest/prompts/extract_claims.txt` - 更新飞龙脉诊声明处理

#### 搜索相关prompt文件
- `ragtest/prompts/basic_search_system_prompt.txt` - 更新查询处理指导
- `ragtest/prompts/drift_search_system_prompt.txt` - 更新查询处理指导
- `ragtest/prompts/local_search_system_prompt.txt` - 更新查询处理指导
- `ragtest/prompts/global_search_map_system_prompt.txt` - 更新查询处理指导

### 5. 主要特点

1. **专业化**：从通用中医知识图谱转向专门的飞龙脉诊知识图谱
2. **完整性**：涵盖脉象、脉位、病症、治疗方法、医家、著作、临床案例、脉诊系统等8个核心实体类型
3. **准确性**：基于您提供的飞龙脉诊实体定义体系进行精确配置
4. **实用性**：关系类型和查询处理都针对飞龙脉诊的实际应用场景进行了优化

### 6. 使用建议

1. **数据准备**：确保输入的中医文本主要涉及飞龙脉诊相关内容
2. **实体识别**：系统将自动识别8种核心实体类型
3. **关系提取**：重点关注脉象与病症、脉位与脏腑、治疗方法与病症等关系
4. **查询优化**：利用更新后的搜索prompt获得更精准的飞龙脉诊相关信息

## 总结

通过本次配置修改，GraphRAG系统现在专门针对飞龙脉诊知识图谱进行了优化，能够更准确地识别和提取飞龙脉诊相关的实体和关系，为用户提供更专业、更精准的中医脉诊知识检索服务。 